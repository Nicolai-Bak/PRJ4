

<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> components/ShoppingList/ShoppingListItem/ListItem.js</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    Documentation
                </a>
                
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
            <nav>
                
                    <h2><a href="index.html">Documentation</a></h2><div class="category"></div><div class="category"><h2>Home</h2><h3>Components / Banner</h3><ul><li><a href="Banner.html">Banner</a></li></ul><h3>Components</h3><ul><li><a href="Home.html">Home</a></li></ul><h3>Components / ShoppingList</h3><ul><li><a href="ListItem.html">ListItem</a></li><li><a href="ShoppingList.html">ShoppingList</a></li></ul><h3>Components / NewItem</h3><ul><li><a href="NewItemForm.html">NewItemForm</a></li><li><a href="SearchField.html">SearchField</a></li><li><a href="UnitBox.html">UnitBox</a></li></ul></div><div class="category"><h2>SearchResultsPage</h2><h3>Components / Dropdown</h3><ul><li><a href="Dropdown.html">Dropdown</a></li></ul><h3>Components / SearchResult</h3><ul><li><a href="SearchResult.html">SearchResult</a></li><li><a href="SearchResultItem.html">SearchResultItem</a></li></ul><h3>Components / SearchResultsPage</h3><ul><li><a href="SearchResultsPage.html">SearchResultsPage</a></li></ul></div><div class="category"><h2>UI</h2><h3>Components / Atoms</h3><ul><li><a href="Button.html">Button</a></li><li><a href="Card.html">Card</a></li></ul><h3>Components / Organisms</h3><ul><li><a href="Footer.html">Footer</a></li><li><a href="NavBar.html">NavBar</a></li></ul><h3>Components / Molecules</h3><ul><li><a href="StandardDialog.html">StandardDialog</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Source</p>
                    <h1>components/ShoppingList/ShoppingListItem/ListItem.js</h1>
                </header>
                



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState } from "react";
import "./ListItem.css";
import Button from "../../UI/Atoms/Button/Button";
import { IoTrashBin } from "react-icons/io5";
import PropTypes from "prop-types";
import { listClasses, Tooltip } from "@mui/material";

/**
 * @classdesc
 * This is the component that represents a single item in the list. The user can interact with the item in multiple ways: delete the item by clicking the trash icon, change the amount and/or unit of the item by clicking the amount input, or increment/decrement by using the '+' and '-' buttons.
 *
 *
 * @category Home
 * @subcategory ShoppingList
 * @component
 * @hideconstructor
 *
 */

const ListItem = (props) => {
	const [displayAmount, setDisplayAmount] = useState(true);

	/**
	 * 
	 * This ensures that the the input from the in the amount field is a number and has a valid unit. It also handles which parameters the 'newUnitOrAmount' event is called with, assuming the input is valid.
	 * 
	 * @param {string} unitValue The unit of the item 
	 * @returns {void} Nothing
	 */
	const amountChanged = (value) => {
		const validUnits = ["stk", "kg", "g", "l", "ml"];
		let numberOfUnits = 0;
		// Removes all values that are not letters and saves the remaining
		const unit = value
			.toString()
			.toLowerCase()
			.replace(/[^a-z]/g, "");
		// Removes everything except numbers, dots and commas
		// Needs to be improved since only one comma or dot should be allowed
		let newAmount = value
			.toString()
			.toLowerCase()
			.replace(/[^0-9.,]+$/, "");

		// testing to see how many valid units were found
		validUnits.forEach((x) => {
			if (x === unit) numberOfUnits++;
		});
		// if user writes no unit or an invalid unit
		if (numberOfUnits &lt; 1) {
			props.newUnitOrAmount(props.id, newAmount, null);
			return;
		}
		// if user changes amount and unit
		if (numberOfUnits === 1) {
			props.newUnitOrAmount(props.id, newAmount, unit);
			return;
		}
		// edge case - user added multiple valid units
		if (numberOfUnits > 1) {
			alert("Mere end en enhed i indtastningsfeltet");
			return;
		}
		console.log("This should never be printed :) :| :(");
	};

	/**
	 * Function that handles the rendering of the input field where the user can change amount and unit and 'amountChanged' with the new information. Also ensures that no change to the item is made if nothing was typed in the input field
	 * 
	 * @param {event} onClick Event that happens when the user  
	 * @returns {void} Nothing
	 */
	const changeAmountAndUnit = (event) => {
		// This renders the input field where the user can change the amount and unit
		if (event.type === "click") {
			setDisplayAmount(!displayAmount);
			return;
		}

		// If there is something written in the amount field, we want to change the amount and unit if a unit has been input
		if (
			event.key === "Enter" ||
			event.type === "blur" ||
			event.key === "Escape"
		) {
			if (event.target.value.length &lt; 1) {
				setDisplayAmount(true);
				return;
			}

			console.log("amountChanged called with : " + event.target.value);
			amountChanged(event.target.value);
			setDisplayAmount(!displayAmount);
		}
	};
	/**
	 * This decides what is displayed when the user interacts with the span that shows unit and amount. When the user clicks on the span, the input field is rendered. When the input field loses focus of the user presses 'Enter' or 'Escape', the input field is hidden and the span is updated with the new amount and unit if the user has changed the amount and unit.
	 *
	 * @returns {JSX} JSX that is rendered
	 */
	const amountAndUnitDisplay = () => {
		if (displayAmount) {
			return (
				&lt;Tooltip
					enterDelay={600}
					leaveDelay={200}
					placement="top"
					title="Ændr på mængde eller enhed"
				>
					&lt;span className="unit-amount" onClick={changeAmountAndUnit}>
						{unitAmountHandler()}
					&lt;/span>
				&lt;/Tooltip>
			);
		} else {
			return (
				&lt;span className="unit-amount">
					&lt;input
						autoFocus
						placeholder={props.amount + props.unit}
						className="unit-amount-input"
						type="text"
						onBlur={changeAmountAndUnit}
						onKeyDown={changeAmountAndUnit}
					/>
				&lt;/span>
			);
		}
	};

	return (
		&lt;div className="list-item">
			&lt;span className="list-item__left">{props.name}&lt;/span>
			&lt;span className="list-item__right">
				&lt;span className="item-buttons">
					&lt;Button
						className="adjust-amount-button"
						onClick={() => props.onDecreaseAmount(props.id)}
					>
						-
					&lt;/Button>
					{amountAndUnitDisplay()}
					&lt;Button
						className="adjust-amount-button"
						onClick={() => props.onIncreaseAmount(props.id)}
					>
						+
					&lt;/Button>
				&lt;/span>
				&lt;IoTrashBin
					title="slet"
					className="remove-button"
					onClick={() => props.onRemoveItem(props.id, props.name)}
				/>
			&lt;/span>
		&lt;/div>
	);

	// This function attempts to prevent seeing values like 0.3kg and instead sees 300g to make it more readable
	function unitAmountHandler() {
		if (props.amount &lt; 1 &amp;&amp; props.unit.toString().toLowerCase() === "kg") {
			return props.amount * 1000 + "g";
		} else if (
			props.amount &lt; 1 &amp;&amp;
			props.unit.toString().toLowerCase() === "l"
		) {
			return props.amount * 1000 + "ml";
		} else {
			return props.amount + props.unit;
		}
	}
};

ListItem.propTypes = {
	/**
	 * The name of the item
	 */
	name: PropTypes.string.isRequired,
	/**
	 * The amount of the item
	 */
	amount: PropTypes.string.isRequired,
	/**
	 * The unit of the item
	 */
	unit: PropTypes.string.isRequired,
	/**
	 * The id of the item
	 */
	id: PropTypes.number.isRequired,
	/**
	 * Sets whether the item has to be organic or not
	 */
	organic: PropTypes.bool.isRequired,
	/**
	 * Event that fires when the '+' button is clicked
	 */
	onIncreaseAmount: PropTypes.func,
	/**
	 * Event that fires when the '-' button is clicked
	 */
	onDecreaseAmount: PropTypes.func,
	/**
	 * Event that fires when the garbage can icon is clicked
	 */
	onRemoveItem: PropTypes.func,
	/**
	 * Event that fires when the user changes the amount and unit through the input field
	 */
	newUnitOrAmount: PropTypes.func,
};

export default ListItem;
</code></pre>
        </article>
    </section>




            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.10</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>


</body>
</html>
